<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>Sinon.JS - Versatile standalone test spies, stubs and mocks for JavaScript</title>
    <link rel="stylesheet" type="text/css" href="sinon.css?1">
  </head>
  <body>
    <h1>Sinon.JS</h1>
    <div id="intro">
      <p class="payoff">
        Standalone test spies, stubs and mocks for JavaScript. No dependencies,
        works with any unit testing framework.
      </p>
      <p class="download">
        <a href="releases/sinon-1.0.0.js">Download Sinon.JS 1.0.0</a>
        <span>2010-12-12 - <a href="Changelog.txt">Changelog</a></span>
      </p>
    </div>
    <h2>Features</h2>
    <ul>
      <li><a href="#spies">Test spies</a></li>
      <li><a href="#stubs">Test stubs</a></li>
      <li><a href="#mocks">Mocks</a></li>
      <li><a href="#clock">Fake timers</a></li>
      <li><a href="#server">Fake <code>XMLHttpRequest</code> and server</a></li>
      <li><a href="#assertions">Assertions</a></li>
      <li><a href="#sandbox">Sandboxing</a></li>
    </ul>
    <h2>Getting started with Sinon.JS</h2>
    <p>
      The core Sinon.JS API works well with any unit testing framework. However,
      for automatic sandboxing, small adapters are provided for popular testing
      frameworks.
    </p>
    <ul>
      <li>
        <a href="sinon-qunit/">Getting started</a> with
        Sinon.JS and <a href="http://docs.jquery.com/Qunit">QUnit</a>.
        (<a href="releases/sinon-qunit-1.0.0.js">Download</a>)
      </li>
      <li>
        <a href="sinon-jstestdriver/">Getting started</a> with
        Sinon.JS and <a href="http://code.google.com/p/js-test-driver/">JsTestDriver</a>.
        (<a href="releases/sinon-jstestdriver-1.0.0.js">Download</a>)
      </li>
      <li>
        <a href="sinon-nodeunit/">Getting started</a> with
        Sinon.JS and <a href="http://caolanmcmahon.com/nodeunit.html">nodeunit</a>.
        (<a href="releases/sinon-nodeunit-1.0.0.js">Download</a>).
      </li>
    </ul>
    <h2>Blog posts</h2>
    <ul>
      <li><a href="http://cjohansen.no/en/javascript/javascript_test_spies_stubs_and_mocks">Core API, part 1</a></li>
      <li><a href="http://cjohansen.no/en/javascript/test_spies_stubs_and_mocks_part_1_5">Core API, part 2</a></li>
      <li><a href="http://cjohansen.no/en/javascript/higer_level_stubbing_and_mocking_tools_in_sinon">Higher-level helpers</a></li>
      <li><a href="http://cjohansen.no/en/javascript/faking_timers_and_dates_with_sinon">Fake timers</a></li>
      <li><a href="http://cjohansen.no/en/javascript/sinon_js_0_6_0_fake_xmlhttprequest_and_improved_test_framework_integration">FakeXMLHttpRequest</a></li>
    </ul>
    <p>
      I regurlary publish material on JavaScript and testing on
      <a href="http://cjohansen.no/en/">my blog</a>. Many of the core ideas in
      Sinon.JS are described in <a href="http://tddjs.com">my book on JavaScript
      TDD</a>.
    </p>
    <h2>Public API</h2>
    <p>
      Below you will find the entire Sinon.JS public API. If you're using any of
      the above test framework adapters, refer to their respective pages for the
      full API with local adjustments.
    </p>
    <div class="section" id="spies">
      <h3>Test spies</h3>
      <p>
        Test spies allow introspection on how a function is used throughout the
        system under test.
      </p>
      <ul class="nav">
        <li><a href="#sinonspy">sinon.spy()</a></li>
        <li><a href="#spyprops">spy interface</a></li>
        <li><a href="#spycall">spy call interface</a></li>
      </ul>
      <h4 id="sinonspy">Creating spies: <code>sinon.spy()</code></h4>
      <dl>
        <dt><code>var spy = sinon.spy();</code></dt>
        <dd>
          Creates an anonymous function that records arguments, <code>this</code> value,
          exceptions and return values for all calls.
        </dd>
        <dt><code>var spy = sinon.spy(myFunc);</code></dt>
        <dd>Spies on the provided function</dd>
        <dt><code>var spy = sinon.spy(object, "method");</code></dt>
        <dd>
          Creates a <a href="#spyprops">spy</a> for <code>object.method</code>
          and replaces the original method with the spy. The spy acts exactly
          like the original method in all cases.  The original method can be
          restored by calling <code>object.method.restore()</code>.  The
          returned spy is the function object which replaced the original
          method. <code>spy === object.method</code>.
        </dd>
      </dl>
      <h4 id="spyprops">Spy interface</h4>
      <p>
        Spy objects are objects returned from <code>sinon.spy()</code>. When
        spying on existing methods with <code>sinon.spy(object, method)</code>,
        the following properties and methods are also available
        on <code>object.method</code>.
      </p>
      <dl>
        <dt><code>spy.callCount</code></dt>
        <dd>The number of recorded calls.</dd>
        <dt><code>spy.called</code></dt>
        <dd><code>true</code> if the spy was called at least once</dd>
        <dt><code>spy.calledOnce</code></dt>
        <dd><code>true</code> if spy was called exactly once</dd>
        <dt><code>spy.calledTwice</code></dt>
        <dd><code>true</code> if the spy was called exactly twice</dd>
        <dt><code>spy.calledThrice</code></dt>
        <dd><code>true</code> if the spy was called exactly thrice</dd>
        <dt><code>spy.calledBefore(anotherSpy);</code></dt>
        <dd>Returns <code>true</code> if the spy was called before <code>anotherSpy</code></dd>
        <dt><code>spy.calledAfter(anotherSpy);</code></dt>
        <dd>Returns <code>true</code> if the spy was called after <code>anotherSpy</code></dd>
        <dt><code>spy.calledOn(obj);</code></dt>
        <dd>
          Returns <code>true</code> if the spy was called at least once with <code>obj</code>
          as <code>this</code>.
        </dd>
        <dt><code>spy.alwaysCalledOn(obj);</code></dt>
        <dd>
          Returns <code>true</code> if the spy was always called with <code>obj</code>
          as <code>this</code>.
        </dd>
        <dt><code>spy.calledWith(arg1, arg2, ...);</code></dt>
        <dd>
          Returns <code>true</code> if spy was called at least once with the provided
          arguments. Can be used for partial matching, Sinon only checks the provided
          arguments against actual arguments, so a call that received the provided arguments
          (in the same spots) and possibly others as well will return <code>true</code>.
        </dd>
        <dt><code>spy.alwaysCalledWith(arg1, arg2, ...);</code></dt>
        <dd>
          Returns <code>true</code> if spy was always called with the provided arguments
          (and possibly others).
        </dd>
        <dt><code>spy.calledWithExactly(arg1, arg2, ...);</code></dt>
        <dd>
          Returns <code>true</code> if spy was called at least once with the provided arguments
          and no others.
        </dd>
        <dt><code>spy.alwaysCalledWithExactly(arg1, arg2, ...);</code></dt>
        <dd>
          Returns <code>true</code> if spy was always called with the exact provided arguments.
        </dd>
        <dt><code>spy.threw();</code></dt>
        <dd>Returns <code>true</code> if spy threw an exception at least once.</dd>
        <dt><code>spy.threw("TypeError");</code></dt>
        <dd>Returns <code>true</code> if spy threw an exception of the provided type at least once.</dd>
        <dt><code>spy.threw(obj);</code></dt>
        <dd>Returns <code>true</code> if spy threw the provided exception object at least once.</dd>
        <dt><code>spy.alwaysThrew();</code></dt>
        <dd>Returns <code>true</code> if spy always threw an exception.</dd>
        <dt><code>spy.alwaysThrew("TypeError");</code></dt>
        <dd>Returns <code>true</code> if spy always threw an exception of the provided type.</dd>
        <dt><code>spy.alwaysThrew(obj);</code></dt>
        <dd>Returns <code>true</code> if spy always threw the provided exception object.</dd>
        <dt><code>spy.returned(obj);</code></dt>
        <dd>
          Returns <code>true</code> if spy returned the provided value at least once.
          Uses deep comparison for objects and arrays.
        </dd>
        <dt><code>spy.alwaysReturned(obj);</code></dt>
        <dd>Returns <code>true</code> if spy always returned the provided value.</dd>
        <dt><code>var spyCall = spy.getCall(n);</code></dt>
        <dd>
          Returns the <em>nth</em> <a href="#spycall">call</a>. Accessing
          individual calls helps with more detailed behavior verification when
          the spy is called more than once. Example:
          <pre><code>sinon.spy(jQuery, "ajax");
jQuery.ajax("/stuffs");
var spyCall = jQuery.ajax.getCall(0);

assertEquals("/stuffs", spyCall.args[0]);</code></pre>
        </dd>
        <dt><code>spy.thisValues</code></dt>
        <dd>
          Array of <code>this</code> objects, <code>spy.thisValues[0]</code> is the <code>this</code>
          object for the first call.
        </dd>
        <dt><code>spy.args</code></dt>
        <dd>
          Array of arguments received, <code>spy.args[0]</code> is an array of arguments
          recevied in the first call.
        </dd>
        <dt><code>spy.exceptions</code></dt>
        <dd>Array of exception objects thrown.</dd>
        <dt><code>spy.returnValues</code></dt>
        <dd>Array of return values.</dd>
      </dl>
      <h4 id="spycall">Individual spy calls</h4>
      <dl>
        <dt><code>var spyCall = spy.getCall(n)</code></dt>
        <dd>
          Returns the <em>nth</em> <a href="#spycall">call</a>. Accessing
          individual calls helps with more detailed behavior verification when
          the spy is called more than once. Example:
          <pre><code>sinon.spy(jQuery, "ajax");
jQuery.ajax("/stuffs");
var spyCall = jQuery.ajax.getCall(0);

assertEquals("/stuffs", spyCall.args[0]);</code></pre>
        </dd>
        <dt><code>spyCall.calledOn(obj);</code></dt>
        <dd>Returns <code>true</code> if <code>obj</code> was <code>this</code> for this call.</dd>
        <dt><code>spyCall.calledWith(arg1, arg2, ...);</code></dt>
        <dd>Returns <code>true</code> if call received provided arguments (and possibly others).</dd>
        <dt><code>spyCall.calledWithExactly(arg1, arg2, ...);</code></dt>
        <dd>Returns <code>true</code> if call received provided arguments and no others.</dd>
        <dt><code>spyCall.threw();</code></dt>
        <dd>Returns <code>true</code> if call threw an exception.</dd>
        <dt><code>spyCall.threw("TypeError");</code></dt>
        <dd>Returns <code>true</code> if call threw exception of provided type.</dd>
        <dt><code>spyCall.threw(obj);</code></dt>
        <dd>Returns <code>true</code> if call threw provided exception object.</dd>
        <dt><code>spyCall.thisValue</code></dt>
        <dd>The call's <code>this</code> value.</dd>
        <dt><code>spyCall.args</code></dt>
        <dd>Array of received arguments.</dd>
        <dt><code>spyCall.exception</code></dt>
        <dd>Exception thrown, if any.</dd>
        <dt><code>spyCall.returnValue</code></dt>
        <dd>Return value.</dd>
      </dl>
    </div>
    <div class="section" id="stubs">
      <h3>Test stubs</h3>
      <p>
        Test stubs are functions (spies) with pre-programmed behavior. They
        support the full <a href="#spies">test spy interface</a> in addition to
        the following methods which can be used to alter the stub's behavior.
      </p>
      <dl>
        <dt><code>var stub = sinon.stub();</code></dt>
        <dd>Creates an anonymous stub function.</dd>
        <dt><code>var stub = sinon.stub(object, "method");</code></dt>
        <dd>
          Replaces <code>object.method</code> with a stub function. The original function
          can be restored by calling <code>object.method.restore();</code> (or
          <code>stub.restore();</code>). An exception is thrown if the property
          is not already a function, to help avoid typos when stubbing methods.
        </dd>
        <dt><code>var stub = sinon.stub(obj);</code></dt>
        <dd>Stubs all the object's methods.</dd>
        <dt><code>stub.returns(obj);</code></dt>
        <dd>Makes the stub return the provided value.</dd>
        <dt><code>stub.throws();</code></dt>
        <dd>Causes the stub to throw an exception (<code>Error</code>).</dd>
        <dt><code>stub.throws("TypeError");</code></dt>
        <dd>Causes the stub to throw an exception of the provided type.</dd>
        <dt><code>stub.throws(obj);</code></dt>
        <dd>Causes the stub to throw the provided exception object.</dd>
        <dt><code>stub.callsArg(index);</code></dt>
        <dd>
          Causes the stub to call the argument at the provided index as a callback
          function. <code>stub.callsArg(0);</code> causes the stub to call the
          first argument as a callback.
        </dd>
        <dt><code>stub.callsArgWith(index, arg1, arg2, ...);</code></dt>
        <dd>Like above, but with arguments to pass to the callback.</dd>
      </dl>
    </div>
    <div class="section" id="mocks">
      <h3>Mocks</h3>
      <p>
        Mocks are slightly different from spies and stubs in that
        you <em>mock</em> and object, and then set an <em>expectation</em> on
        one or more of its objects. <a href="#expectations">Expectations</a>
        implement both the <a href="#spies">spies</a> and
        <a href="#stubs">stubs</a> interfaces and additionally set pass criteria
        upfront. Expectations are explained in more detail below.
      </p>
      <dl>
        <dt><code>var mock = sinon.mock(obj);</code></dt>
        <dd>
          Creates a mock for the provided object. Does not change the object, but returns
          a mock object to set expectations on the object's methods.
        </dd>
        <dt><code>var expectation = mock.expects("method");</code></dt>
        <dd>
          Overrides <code>obj.method</code> with a mock function and returns it.
          See <a href="#expectations">expectations</a> below.
        </dd>
        <dt><code>mock.restore();</code></dt>
        <dd>Restores all mocked methods.</dd>
        <dt><code>mock.verify();</code></dt>
        <dd>
          Verifies all expectations on the mock. If any expectation is not
          satiesfied, an exception is thrown. Also restores the mocked methods.
        </dd>
      </dl>
      <h4 id="expectations">Expectations</h4>
      <p>
        All the expectation methods returns the expectation, meaning you can chain them.
        Typical usage:
      </p>
      <pre><code>sinon.mock(jQuery).expects("ajax").atLeast(2).atMost(5);
jQuery.ajax.verify();</code></pre>
      <dl>
        <dt><code>var expectation = sinon.expectation.create([methodName]);</code></dt>
        <dd>
          Creates an expectation without a mock object, basically an anonymous
          mock function. Method name is optional and is used in exception
          messages to make them more readable.
        </dd>
        <dt><code>var expectation = sinon.mock();</code></dt>
        <dd>The same as the above.</dd>
        <dt><code>expectation.atLeast(number);</code></dt>
        <dd>Specify the minimum amount of calls expected.</dd>
        <dt><code>expectation.atMost(number);</code></dt>
        <dd>Specify the maximum amount of calls expected.</dd>
        <dt><code>expectation.never();</code></dt>
        <dd>Expect the method to never be called.</dd>
        <dt><code>expectation.once();</code></dt>
        <dd>Expect the method to be called exactly once.</dd>
        <dt><code>expectation.twice();</code></dt>
        <dd>Expect the method to be called exactly twice.</dd>
        <dt><code>expectation.thrice();</code></dt>
        <dd>Expect the method to be called exactly thrice.</dd>
        <dt><code>expectation.exactly(number);</code></dt>
        <dd>Expect the method to be called exactly <code>number</code> times.</dd>
        <dt><code>expectation.withArgs(arg1, arg2, ...);</code></dt>
        <dd>Expect the method to be called with the provided arguments and possibly others.</dd>
        <dt><code>expectation.withExactArgs(arg1, arg2, ...);</code></dt>
        <dd>Expect the method to be called with the provided arguments and no others.</dd>
        <dt><code>expectation.on(obj);</code></dt>
        <dd>Expect the method to be called with <code>obj</code> as <code>this</code>.</dd>
        <dt><code>expecation.verify();</code></dt>
        <dd>Verifies the expectation and throws an exception if it's not met.</dd>
      </dl>
    </div>
    <div class="section" id="clock">
      <h3>Fake timers</h3>
      <p>
        Fake timers is a non-asynchronous implementation of
        <code>setTimeout</code> and friends that Sinon.JS can overwrite the
        global functions to allow you to more easily test such code. Fake timers
        provide a <code>clock</code> object to pass time, which can also be used
        to control <code>Date</code> objects created through either <code>new
        Date();</code> or <code>Date.now();</code> (if supported by the browser).
      </p>
      <p>
        When faking timers with IE you also need
        <a href="releases/sinon-ie-1.0.0.js">sinon-ie-1.0.0</a>, which should be
        loaded after sinon-1.0.0.js.
      </p>
      <p>
        The fake timers can be used completely stand-alone by downloading
        <a href="releases/sinon-timers-1.0.0.js">sinon-timers-1.0.0</a>. When
        using the fake timers in IE you also need
        <a href="releases/sinon-timers-ie-1.0.0.js">sinon-timers-ie-1.0.0</a>. Load
        it after the first file.
      </p>
      <dl>
        <dt><code>var clock = sinon.useFakeTimers();</code></dt>
        <dd>
          <p>
            Causes Sinon to replace the global <code>setTimeout</code>,
            <code>clearTimeout</code>, <code>setInterval</code>,
            <code>clearInterval</code> and <code>Date</code> with a custom
            implementation which is bound to the returned <code>clock</code>
            object.
          </p>
        </dd>
        <dt><code>var clock = sinon.useFakeTimers(now);</code></dt>
        <dd>
          As above, but rather than starting the clock at the current timestamp,
          start at the provided timestamp.
        </dd>
        <dt><code>var clock = sinon.useFakeTimers([now, ]prop1, prop2, ...);</code></dt>
        <dd>
          Sets the clock start timestamp and names functions to fake. Possible
          functions are setTimeout, clearTimeout, setInterval, clearInterval,
          and Date. Can also be called without the timestamp.
        </dd>
        <dt><code>clock.tick(ms);</code></dt>
        <dd>
          Tick the clock ahead <code>ms</code> milliseconds. Causes all timers
          scheduled within the affected time range to be called.
        </dd>
        <dt><code>clock.restore();</code></dt>
        <dd>Restore the faked methods. Call in e.g. <code>tearDown</code>.</dd>
      </dl>
    </div>
    <div class="section" id="server">
      <h3>Fake <code>XMLHttpRequest</code></h3>
      <p>
        Provides a fake implementation of <code>XMLHttpRequest</code> and
        provides several interfaces for manipulating objects created by it. Also
        fakes the native <code>XMLHttpRequest</code> and 
        Helps with testing requests made with XHR.
      </p>
      <p>
        When faking XHR with IE you also need
        <a href="releases/sinon-ie-1.0.0.js">sinon-ie-1.0.0</a>, which should be
        loaded after sinon-1.0.0.js.
      </p>
      <p>
        The fake server and XHR can be used completely stand-alone by
        downloading <a href="releases/sinon-server-1.0.0.js">sinon-server-1.0.0</a>.
        When using the fake server in IE you also need
        <a href="releases/sinon-ie-1.0.0.js">sinon-ie-1.0.0</a>. Load it after
        the first file.
      </p>
      <dl>
        <dt><code>var xhr = sinon.useFakeXMLHttpRequest();</code></dt>
        <dd>
          Causes Sinon to replace the native <code>XMLHttpRequest</code> object
          in browsers that support it with a custom implementation which does
          not send actual requests. In browsers that support
          <code>ActiveXObject</code>, this constructor is replaced, and fake
          objects are returned for XMLHTTP progIds. Other progIds, such as
          XMLDOM are left untouched.
        </dd>
        <dt><code>xhr.onCreate = function (xhr) {};</code></dt>
        <dd>
          By assigning a function to the <code>onCreate</code> property of the
          returned object from <code>useFakeXMLHttpRequest()</code> you can
          subscribe to newly created <code>FakeXMLHttpRequest</code>
          objects. See below for the fake xhr object API. Using this observer
          means you can still reach objects created by
          e.g. <code>jQuery.ajax</code> (or other abstractions/frameworks).
        </dd>
        <dt><code>xhr.restore();</code></dt>
        <dd>Restore original function(s).</dd>
      </dl>
      <h4>Behavior verification of request objects</h4>
      <dl>
        <dt>String <code>request.url</code></dt>
        <dt>String <code>request.method</code></dt>
        <dt>Object <code>request.requestHeaders</code></dt>
        <dt>int <code>request.status</code></dt>
        <dd></dd>
        <dt>String <code>request.statusText</code></dt>
        <dd>Only populated if the <code>respond</code> method is called (see below).</dd>
        <dt>boolean <code>request.async</code></dt>
        <dt>String <code>request.username</code></dt>
        <dt>String <code>request.password</code></dt>
        <dd></dd>
        <dt>Document <code>request.responseXML</code></dt>
        <dd>
          When using <code>respond</code> (see below), this property is
          populated with a parsed document if response headers indicate as much
          (see <a href="http://www.w3.org/TR/XMLHttpRequest/">the spec</a>).
        </dd>
        <dt>String <code>request.getResponseHeader(header);</code></dt>
        <dd></dd>
        <dt>Object <code>request.getAllResponseHeaders();</code></dt>
        <dd></dd>
      </dl>
      <h4>Simulate server responses</h4>
      <dl>
        <dt><code>request.setResponseHeaders(object);</code></dt>
        <dd>
          Sets response headers (e.g. <code>{ "Content-Type": "text/html", /*
          ... */ }</code>, updates the <code>readyState</code> property and
          fires <code>onreadystatechange</code>.
        </dd>
        <dt><code>request.setResponseBody(body);</code></dt>
        <dd>
          Sets the respond body, updates the <code>readyState</code> property and
          fires <code>onreadystatechange</code>. Additionally,
          populates <code>responseXML</code> with a parsed document
          if <a href="http://www.w3.org/TR/XMLHttpRequest/">response headers indicate as much</a>.
        </dd>
        <dt><code>request.respond(status, headers, body);</code></dt>
        <dd>
          Calls the above two methods and sets the <code>status</code> and
          <code>statusText</code> properties.
        </dd>
      </dl>
      <p>
        <strong>Note!</strong> To use fake timers successfully in
        Internet Explorer, you need <a href="releases/sinon-ie-1.0.0.js">the IE
        addon</a>. It needs to stay in a separate file and it should be included
        after Sinon.JS. I'm working on a better solution.
      </p>
    </div>
    <div class="section">
      <h3>Fake server</h3>
      <p>
        High-level API to manipulate <code>FakeXMLHttpRequest</code> instances.
      </p>
      <dl>
        <dt><code>var server = sinon.fakeServer.create();</code></dt>
        <dd>
          Creates a new server. This function also calls <code>sinon.useFakeXMLHttpRequest()</code>.
        </dd>
        <dt><code>var server = sinon.fakeServerWithClock.create();</code></dt>
        <dd>
          Creates a server that also manages fake timers. This is useful when
          testing XHR objects created with e.g. jQuery 1.3.x, which uses a timer
          to poll the object for completion, rather than the usual <code>onreadystatechange</code>.
        </dd>
        <dt><code>server.respondWith(response);</code></dt>
        <dd>
          <code>response</code> is either a string - the response body, or an
          array with status, headers and response body, e.g.
          <code>[200, { "Content-Type": "text/html", "Content-Length": 2 },
          "OK"]</code>. Default status is 200 and default headers are none.
          Causes the server to respond to any request not matched by another
          response with the provided data. The default catch-all response is
          <code>[404, {} ""]</code>.
        </dd>
        <dt><code>server.respondWith(url, response);</code></dt>
        <dd>
          Responds to all requests to given URL, e.g. <code>/posts/1</code>.
        </dd>
        <dt><code>server.respondWith(method, url, response);</code></dt>
        <dd>
          Responds to all <code>method</code> requests to the given URL with the
          given response. <code>method</code> is an HTTP verb.
        </dd>
        <dt><code>server.respondWith(urlRegExp, response);</code></dt>
        <dd>
          URL may be a regular expression, e.g. <code>/\/post/\d+</code>
        </dd>
        <dt><code>server.respondWith(method, urlRegExp, response);</code></dt>
        <dd></dd>
        <dt><code>server.respond();</code></dt>
        <dd>
          Causes all queued asynchronous requests to receive a response. If none
          of the responses added through <code>respondWith</code> match, the
          default response is <code>[404, {}, ""]</code>. Synchronous requests
          are responded to immediately, so make sure to
          call <code>respondWith</code> upfront.
        </dd>
        <dt>Boolean <code>server.fakeHTTPMethods</code></dt>
        <dd>
          If set to <code>true</code>, server will find <code>_method</code>
          parameter in POST body and recognize that as the actual
          method. Supports a pattern common to Ruby on Rails applications. For
          custom HTTP method faking,
          override <code>server.getHTTPMethod(request)</code>.
        </dd>
        <dt><code>server.restore();</code></dt>
        <dd>
          Restores the native XHR constructor.
        </dd>
      </dl>
      <p>
        <strong>Note!</strong> To use fake XHR and the server successfully in
        Internet Explorer, you need <a href="releases/sinon-ie-1.0.0.js">the IE
        addon</a>. It needs to stay in a separate file and it should be included
        after Sinon.JS. I'm working on a better solution.
      </p>
    </div>
    <div class="section">
      <h3>Sandboxes</h3>
      <p>
        Sandboxes simplify working with fakes that need to be restore and/or
        verified.
      </p>
      <dl>
        <dt><code>var sandbox = sinon.sandbox.create();</code></dt>
        <dd></dd>
        <dt><code>sandbox.spy();</code></dt>
        <dd>
          Works exactly like <code>sinon.spy</code>, only also adds the returned
          spy to the internal collection of fakes for easy restoring
          through <code>sandbox.restore()</code>.
        </dd>
        <dt><code>sandbox.stub();</code></dt>
        <dd>
          Works exactly like <code>sinon.stub</code>, only also adds the returned
          stub to the internal collection of fakes for easy restoring
          through <code>sandbox.restore()</code>.
        </dd>
        <dt><code>sandbox.mock();</code></dt>
        <dd>
          Works exactly like <code>sinon.mock</code>, only also adds the returned
          mock to the internal collection of fakes for easy restoring
          through <code>sandbox.restore()</code>.
        </dd>
        <dt><code>sandbox.useFakeTimers();</code></dt>
        <dd>
          Fakes timers and binds the <code>clock</code> object to the sandbox
          such that it too is restored when
          calling <code>sandbox.restore()</code>. Access through <code>sandbox.clock</code>.
        </dd>
        <dt><code>sandbox.useFakeXMLHttpRequest();</code></dt>
        <dd>
          Fakes XHR and binds the resulting object to the sandbox such that it
          too is restored when calling <code>sandbox.restore()</code>. Access
          requests through <code>sandbox.requests</code>.
        </dd>
        <dt><code>sandbox.useFakeServer();</code></dt>
        <dd>
          Fakes XHR and binds a server object to the sandbox such that it
          too is restored when calling <code>sandbox.restore()</code>. Access
          requests through <code>sandbox.requests</code> and server through
          <code>sandbox.server</code>.
        </dd>
        <dt><code>sandbox.restore();</code></dt>
        <dd>Restores all fakes created through sandbox.</dd>
      </dl>
      <p>
        <strong>Note!</strong> To use fake XHR and the server successfully in
        Internet Explorer, you need <a href="releases/sinon-ie-1.0.0.js">the IE
        addon</a>. It needs to stay in a separate file and it should be included
        after Sinon.JS. I'm working on a better solution.
      </p>
    </div>
    <div class="section">
      <h3>Test methods</h3>
      <p>
        Wrapping test methods in <code>sinon.test</code> allows Sinon to
        automatically create and manage sandboxes for you. The function's
        behavior can be configured through <code>sinon.config</code>.
      </p>
      <dl>
        <dt><code>var wrappedFn = sinon.test(fn);</code></dt>
        <dd>
          The <code>wrappedFn</code> function works exactly like the original
          one in all respect - in addition a sandbox object is created and
          automatically restored when the function finishes a call. By default
          the spy, stub and mock properties of the sandbox is bound to whatever
          object the function is run on, so you can do <code>this.spy()</code>
          (and stub, mock) and it works exactly like <code>sandbox.spy()</code>
          (and stub, mock), except you don't need to manually <code>restore()</code>.
        </dd>
      </dl>
      <h4>sinon.config</h4>
      <p>
        The configuration controls how Sinon binds properties when
        using <code>sinon.test</code>. To emulate 0.5.0 binding, use this
        configuration:
      </p>
      <pre>sinon.config = {
  injectIntoThis: false,
  injectInto: null,
  properties: ["stub", "mock"]
}</pre>
      <dl>
        <dt>Boolean <code>injectIntoThis</code></dt>
        <dd>
          Causes properties to be injected into the <code>this</code> object of
          the test function. Default <code>true</code>.
        </dd>
        <dt>Object <code>injectInto</code></dt>
        <dd>
          Object to bind properties to. If this is <code>null</code> (default)
          and <code>injectIntoThis</code> is <code>false</code> (not default),
          the properties are passed as arguments to the test function instead.
        </dd>
        <dt>Array <code>properties</code></dt>
        <dd>
          Properties to expose. Default is all:
          <code>["spy", "stub", "mock", "clock", "server",
          "requests"]</code>. However, the last three properties are only bound
          if the following to two configuration options are <code>true</code>
          (which is not the default).
        </dd>
        <dt>Boolean <code>useFakeTimers</code></dt>
        <dd>Set to <code>true</code> to always use fake timers. Default is <code>false</code>.</dd>
        <dt>Boolean <code>useFakeXMLHttpRequest</code></dt>
        <dd>Set to <code>true</code> to always use fake XHR and server. Default is <code>false</code>.</dd>
      </dl>
    </div>
    <div class="section">
      <h3>Test cases</h3>
      <p>
        If you need the behavior of <code>sinon.test</code> for more than one
        test method in a test case, you can use <code>sinon.testCase</code>,
        which behaves exactly like wrapping each test in <code>sinon.test</code>
        with one exception: <code>setUp</code> and <code>tearDown</code> can
        share fakes.
      </p>
      <dl>
        <dt><code>var obj = sinon.testCase({});</code></dt>
      </dl>
    </div>
    <div class="aside">
      <p>Sinon uses <a href="http://semver.org/">Semantic versioning</a>.</p>
      <p>
        Copyright 2010, Christian Johansen. Released under the 
        <a href="http://www.opensource.org/licenses/bsd-license.php">BSD license</a>.
      </p>
    </div>
    <script type="text/javascript" src="sinon-web.js?0"></script>
  </body>
</html>
